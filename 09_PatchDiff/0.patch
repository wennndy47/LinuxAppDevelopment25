diff a/labyrinth.c b/labyrinth.c
index 4022e07..c7a2f14 100644
--- a/labyrinth.c
+++ b/labyrinth.c
@@ -3,13 +3,13 @@
 #include <stdio.h>
 
 
-#define SIZE 6
-#define GRID_SIZE (SIZE * 2 + 1)
+int SIZE;
+int GRID_SIZE;
 
 
 void genMaze(
-    char maze[GRID_SIZE][GRID_SIZE], 
-    int visited[SIZE][SIZE], 
+    char** maze, 
+    int** visited, 
     int x, 
     int y
 ) {
@@ -38,7 +38,7 @@ void genMaze(
     }
 }
 
-void addWalls(char maze[GRID_SIZE][GRID_SIZE], int currentWalls) {
+void addWalls(char** maze, int currentWalls) {
     int totalCells = GRID_SIZE * GRID_SIZE;
     while (currentWalls < totalCells * 15 / 100) {
         int i = rand() % (GRID_SIZE - 2) + 1;
@@ -66,11 +66,25 @@ void addWalls(char maze[GRID_SIZE][GRID_SIZE], int currentWalls) {
     }
 }
 
-int main() {
+int main(int argc, char** argv) {
     srand(time(NULL));
-    char maze[GRID_SIZE][GRID_SIZE];
-    int visited[SIZE][SIZE] = {0};
-    
+    if (argc != 2) {
+        printf("Incorrect number of arguments");
+        return 1;
+    }
+    SIZE = atoi(argv[1]);
+    GRID_SIZE = SIZE * 2 + 1;
+    char** maze = (char**)malloc(GRID_SIZE * sizeof(char*));
+    for (int i = 0; i < GRID_SIZE; i++) {
+        maze[i] = (char*)malloc(GRID_SIZE * sizeof(char));
+    }
+    int** visited = (int**)malloc(SIZE * sizeof(int*));
+    for (int i = 0; i < SIZE; i++) {
+        visited[i] = (int*)malloc(SIZE * sizeof(int));
+        for (int j = 0; j < SIZE; j++) {
+            visited[i][j] = 0;
+        }
+    }
     for (int i = 0; i < GRID_SIZE; i++) 
         for (int j = 0; j < GRID_SIZE; j++)
             if (i % 2 == 0 || j % 2 == 0)
@@ -97,5 +111,13 @@ int main() {
         }
         printf("\n");
     }
+    for (int i = 0; i < GRID_SIZE; i++) {
+        free(maze[i]);
+    }
+    free(maze);
+    for (int i = 0; i < SIZE; i++) {
+        free(visited[i]);
+    }
+    free(visited);
     return 0;
 }
\ No newline at end of file
